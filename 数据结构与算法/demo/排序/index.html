<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    class GeneratedArray {
      constructor() {
        this.dataStore = [];
        this.pos = 0;
        this.numElements = numElements;
        this.gaps = [5, 3, 1];
        this.create();
      }

      create() {
        for (let i = 0; i < this.numElements; i++) { this.dataStore[i] = i; }
      } setData() {
        for (let i = 0; i < this.numElements;
          i++) { this.dataStore[i] = Math.floor(Math.random() * (this.numElements + 1)); }
      } clear() {
        for (let i = 0; i <
          this.numElements; i++) { this.dataStore[i] = 0; }
      } insert(element) { this.dataStore[this.pos++] = element; } toString() {
        let restr = ''; for (let i = 0; i < this.dataStore.length; i++) {
          restr += this.dataStore[i] + ' '; if (i > 0 && i %
            10 == 0) {
            restr += '\n';
          }
        }
        return restr;
      }

      swap(arr, index1, index2) {
        [arr[index1], arr[index2]] = [arr[index2], arr[index1]];
      }

      bubbleSort() {
        // 改进版冒泡排序
        const len = this.dataStore.length;
        let complete;
        for (let i = len - 1; i >= 1; i++) {
          complete = false;
          for (let j = 0; j <= i - 1; j++) {
            if (this.dataStore[j] > this.dataStore[j + 1]) {
              this.swap(this.dataStore, j, j + 1);
              complete = true;
            }
          }
          if (!complete) {
            break;
          }
        }
      }

      selectionSort() {
        let min;
        const len = this.dataStore.length;
        for (let i = 0; i < len - 1; i++) {
          min = i; for (let j = i + 1; j < this.dataStore.length; j++) {
            if
              (this.dataStore[j] < this.dataStore[min]) { min = j; } this.swap(this.dataStore, i, min);
          }
        }
      }
      insertionSort() {
        let temp, index;
        const len = this.dataStore.length;
        for (let i = 1; i < len; i++) {
          temp = this.dataStore[i];
          index = i;
          while (index > 0 && this.dataStore[index - 1] >= temp) {
            this.dataStore[index] = this.dataStore[index - 1];
            index--;
          }
          this.dataStore[index] = temp;
        }
      }

      shellSort() {
        // 间隔值
        for (let g = 0; g < this.gaps.length; g++) {
          for (let i = 0; i < this.dataStore.length; i++) {
            const
              temp = this.dataStore[i]; let j = i; for (; j >= this.gaps[g] && this.dataStore[j - this.gaps[g]] > temp; j
                -= this.gaps[g]) {
              this.dataStore[j] = this.dataStore[j - this.gaps[g]];
            }
            this.dataStore[j] = temp;
          }
        }
      }

      setGaps(arr) {
        this.gaps = arr;
      }

      dynamicShellSort() {
        const len = this.dataStore.length;
        let h = 1;
        while (h < len / 3) { h = h * 3 + 1; } while (h >= 1) {
          for (let i = h; i < len; i++) {
            for (let j = i; j >= h && this.dataStore[j] < this.dataStore[j - h]; j
              -= h) { this.swap(this.dataStore, j, j - h); }
          } h = (h - 1) / 3;
        }
      }

      quickSort(list) {
        const len = list.length;
        if (len === 0) {
          return [];
        }
        let lesser = [], greater = [];
        let piovt = list[0];
        for (let i = 1; i < list.length; i++) {
          if (list[i] < piovt) {
            lesser.push(list[i]);
          } else {
            greater.push(list[i]);
          }
        }
        return this.quickSort(lesser).concat(piovt, this.quickSort(greater));
      }
    }
    const numElements = 100;
    let myNums = new GeneratedArray(numElements);
    myNums.setData();
    console.time();
    myNums.insertionSort(myNums.dataStore);
    console.timeEnd();
    myNums = new GeneratedArray(numElements);
    myNums.setData();
    console.time();
    myNums.selectionSort(myNums.dataStore);
    console.timeEnd();
    myNums = new GeneratedArray(numElements);
    myNums.setData();
    console.log(myNums);
    console.time();
    myNums.quickSort(myNums.dataStore);
    console.timeEnd();
    myNums = new GeneratedArray(numElements);
    myNums.setData();
    console.log(myNums);
    console.time();
    myNums.dynamicShellSort()
    console.timeEnd()
  </script>
</body>

</html>