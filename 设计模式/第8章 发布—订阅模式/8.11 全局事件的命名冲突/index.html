<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    class Event {
      constructor() {
        this.clientList = {};
      }

      listen(key, fn) {
        if (!this.clientList[key]) {
          this.clientList[key] = [];
        }
        this.clientList[key].push(fn);
      }

      trigger(...args) {
        const key = args.shift();
        const fns = this.clientList[key];
        if (!fns || fns.length === 0) {
          return false;
        }

        for (let i = 0; i < fns.length; i++) {
          fns[i].apply(this, args);
        }
      }

      remove(key, fn) {
        const fns = this.clientList[key];
        if (!fns) {
          return false;
        }

        if (!fn) {
          fns && (fns.length = 0);
        } else {
          for (let i = fns.length - 1; i >= 0; i--) {
            var _fn = fns[i];
            if (_fn === fn) {
              fns.splice(i, 1);
            }
          }
        }
      }
    }
  </script>
  <script>
    const Event = (function () {
      const global = this;
      let Event,
        _default = 'default';

      Event = function () {
        let _listen,
          _trigger,
          _remove,
          _slice = Array.prototype.slice,
          _shift = Array.prototype.shift,
          _unshift = Array.prototype.unshift,
          namespaceCache = {},
          _create,
          find,
          each = function (ary, fn) {
            let ret;
            for (let i = 0; i < ary.length; i++) {
              const n = ary[i];
              ret = fn.call(n, i, n);
            }
            return ret;
          };

          _listen = function(key, fn, cache) {
            if (!cache[key]) {
              cache[key] = [];
            }
            cache[key].push(fn);
          }
      }
    })
  </script>
</body>

</html>