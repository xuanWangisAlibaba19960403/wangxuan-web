<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // 1
    // var res = [];

    // function response(data) {
    //   if (data.url === 'http://www.xxx1.com') {
    //     res[0] = data;
    //   } else if (data.url === 'http://www.xxx2.com') {
    //     res[1] = data;
    //   }
    // }

    // ajax('http://www.xxx1.com', response)
    // ajax('http://www.xxx2.com', response)

    // 2
    // var a, b;

    // function foo(x) {
    //   a = x * 2;
    //   baz();
    // }

    // function bar(y) {
    //   b = y * 2;
    //   baz();
    // }

    // function baz() {
    //   // a或者b处于未赋值状态
    //   console.log(a + b);
    // }

    // ajax('http://www.xxx1.com', response)
    // ajax('http://www.xxx2.com', response)

    // // 传统上称为门 if (a && b)
    // // 等待a，b都准备好了再打开门

    // // 3
    // var a;

    // function foo(x) {
    //   a = x * 2;
    //   baz();
    // }

    // function bar(x) {
    //   a = x / 2;
    //   baz();
    // }

    // function baz() {
    //   console.log(a);
    // }

    // // ajax('http://www.xxx1.com', response)
    // // ajax('http://www.xxx2.com', response)

    // // 不管哪一个后被触发，都不仅会覆盖另外一个给a赋的值，也会
    // // 重复调用baz函数（很可能不是想要的结果）

    // function foo(x) {
    //   if (!a) {
    //     a = x * 2;
    //     baz();
    //   }
    // }

    // function bar(x) {
    //   if (!a) {
    //     a = x * 2;
    //     baz();
    //   }
    // }

    // function baz() {
    //   console.log(a);
    // }

    // // 只有一个会被触发
  </script>
</body>

</html>