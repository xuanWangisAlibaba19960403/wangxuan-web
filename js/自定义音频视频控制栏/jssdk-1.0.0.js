var tt=function(){"use strict";function e(e){var n="";const t=new Uint8Array(e),r=t.byteLength;for(var o=0;o<r;o++)n+=String.fromCharCode(t[o]);return w(n)}function n(e){const n=_(e),t=n.length,r=new Uint8Array(t);for(var o=0;o<t;o++)r[o]=n.charCodeAt(o);return r.buffer}function t(n){return{base64:e(n)}}function r(e){if(null!=e)return e.base64?n(e.base64):void 0}function o(e){return function(n){return Object.prototype.toString.call(n).toLowerCase()===("[object "+e+"]").toLowerCase()}}function a(e){if(!1===o("Object")(e))return e;var n=[];for(var r in e){var a=e[r];if(void 0!==a&&a instanceof ArrayBuffer&&void 0!==a.byteLength){var i=t(a);i.key=r,n.push(i)}}if(n.length>0){for(var s=0;s<n.length;s++)delete e[n[s].key];e.__nativeBuffers__=n}return e}function i(e){if(!1===o("Object")(e)||null==e.__nativeBuffers__)return e;var n=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var t=0;t<n.length;t++){var a=n[t];if(null!=a){var i=r(a);void 0!==i&&i instanceof ArrayBuffer&&(e[a.key]=i)}}return e}function s(e,n){if(void 0!==e&&"function"==typeof O[n]&&""!==e&&null!==e){try{e=JSON.parse(e),e=C.unpack(e)}catch(n){e={}}O[n](e),delete O[n]}}function c(e,n,t){if(M&&D.needCache.find(n=>n===e))return void F.push([e,n,t]);if(k)s(k.invoke(e,n,t),t);else{var r={event:e,paramsString:n,callbackId:t};S.messageHandlers.invoke.postMessage(r)}}function f(e,n,t){k?k.publish(e,n,t):S.messageHandlers.publish.postMessage({event:e,paramsString:n,webviewIds:t})}function u(e,n,t){n=C.pack(n);var r=JSON.stringify(n||{}),o=++B;O[o]=t,"openSchema"===e&&E.push(o),c(e,r,o)}function l(e,n){"string"==typeof n&&(n=JSON.parse(n)),n=C.unpack(n);var t=O[e];"function"==typeof t&&t(n),-1===E.indexOf(e)&&delete O[e]}function p(e,n){J[e]=n}function d(e,n,t){t=t||[],t=JSON.stringify(t),f("custom_event_"+e,JSON.stringify(n),t)}function g(e,n){j["custom_event_"+e]=n}function v(e,n,t,r){if(e===T.onAppEnterBackground)M=!0;else if(e===T.onAppEnterForeground)for(M=!1;F.length;)c.apply(null,F.shift());if(!M||!D.needDisabled.find(n=>n===e)){"string"==typeof n&&(n=JSON.parse(n)),n=C.unpack(n);var o=e.indexOf("custom_event_")>-1?j[e]:J[e];"function"==typeof o&&o(n,t,r)}}function h(e){e()}function b(){var e=Array.prototype.slice.call(arguments);e[1]={data:e[1],options:{timestamp:Date.now()}},h(function(){N.publish.apply(N,e)})}function y(e){var n=e.name,t=void 0===e.type?"sdk":e.type,r=void 0===e.args?{}:e.args,o=void 0===e.ext?{}:e.ext;x[L]={success:r.success||I,fail:r.fail||I,complete:r.complete||I},H[L]={beforeAll:o.beforeAll||I,beforeSuccess:o.beforeSuccess||I,afterSuccess:o.afterSuccess||I,beforeFail:o.beforeFail||I,afterFail:o.afterFail||I,afterAll:o.afterAll||I},b("invokeAppServiceMethod",{name:n,type:t,args:r,callbackId:L}),L+=1}const m=new Function("return this;")(),k=m.ttJSCore,S=m.webkit;m.ttJSCore&&(m.ttJSCore={onDocumentReady:()=>k.onDocumentReady()}),m.webkit&&(m.webkit={messageHandlers:{onDocumentReady:{postMessage:()=>S.messageHandlers.onDocumentReady.postMessage("")}}});const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var w=w||function(e){for(var n,t,r=String(e),o="",a=0,i=A;r.charAt(0|a)||(i="=",a%1);o+=i.charAt(63&n>>8-a%1*8)){if((t=r.charCodeAt(a+=.75))>255)throw new Error('"btoa" failed');n=n<<8|t}return o},_=_||function(e){var n=String(e).replace(/=+$/,""),t="";if(n.length%4==1)throw new Error('"atob" failed');for(var r,o,a=0,i=0;o=n.charAt(i++);~o&&(r=a%4?64*r+o:o,a++%4)?t+=String.fromCharCode(255&r>>(-2*a&6)):0)o=A.indexOf(o);return t},C={new:t,get:r,pack:a,unpack:i},O={},B=0,J={},j={},F=[],M=!1,E=[],T={onAppEnterBackground:"onAppEnterBackground",onAppEnterForeground:"onAppEnterForeground"},D={needCache:["showModal","showToast","showActionSheet","hideToast"],needDisabled:["onAccelerometerChange","onCompassChange"]},N={on:p,publish:d,invoke:u,subscribe:g};m.ttJSBridge={get invokeHandler(){return l},get subscribeHandler(){return v}};var L=0,x=[],H=[],I=function(){};return function(){var e=Array.prototype.slice.call(arguments),n=e[1];e[1]=function(e,t,r={}){"string"==typeof e&&(e=JSON.parse(e));var o=e.data;"function"==typeof n&&n(o,t)},h(function(){N.subscribe.apply(N,e)})}("callbackAppServiceMethod",function(e){var n=e.res,t=e.isSuccess,r=e.callbackId,o=x[r],a=H[r];a.beforeAll(n),t?(a.beforeSuccess(n),o.success(n),a.afterSuccess(n)):(a.beforeFail(n),o.fail(n),a.afterFail(n)),o.complete(n),a.afterAll(n)}),{miniProgram:{redirectTo:function(e){y({name:"redirectTo",args:e,type:"jssdk"})},navigateTo:function(e){y({name:"navigateTo",args:e,type:"jssdk"})},switchTab:function(e){y({name:"switchTab",args:e,type:"jssdk"})},reLaunch:function(e){y({name:"reLaunch",args:e,type:"jssdk"})},navigateBack:function(e){y({name:"navigateBack",args:e,type:"jssdk"})},postMessage:function(e){e&&y({name:"postMessage",args:e,type:"jssdk"})}}}}();
